(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{359:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"vue3-状态管理-pinia"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue3-状态管理-pinia"}},[s._v("#")]),s._v(" Vue3 状态管理 - Pinia")]),s._v(" "),t("h2",{attrs:{id:"_1-什么是pinia"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是pinia"}},[s._v("#")]),s._v(" 1. 什么是Pinia")]),s._v(" "),t("p",[s._v("Pinia 是 Vue 的专属的最新状态管理库 ，是 Vuex 状态管理工具的替代品\n"),t("img",{staticClass:"lazy",attrs:{alt:"image.png","data-src":"assets/31.png",loading:"lazy"}})]),s._v(" "),t("h2",{attrs:{id:"_2-手动添加pinia到vue项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-手动添加pinia到vue项目"}},[s._v("#")]),s._v(" 2. 手动添加Pinia到Vue项目")]),s._v(" "),t("p",[s._v("后面在实际开发项目的时候，Pinia可以在项目创建时自动添加，现在我们初次学习，从零开始：")]),s._v(" "),t("ol",[t("li",[s._v("使用 Vite 创建一个空的 Vue3项目")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init vite@latest\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("按照官方文档安装 pinia 到项目中")])]),s._v(" "),t("h2",{attrs:{id:"_3-pinia基础使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-pinia基础使用"}},[s._v("#")]),s._v(" 3. Pinia基础使用")]),s._v(" "),t("ol",[t("li",[s._v("定义store")]),s._v(" "),t("li",[s._v("组件使用store")])]),s._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"image.png","data-src":"assets/32.png",loading:"lazy"}})]),s._v(" "),t("h2",{attrs:{id:"_4-getters实现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-getters实现"}},[s._v("#")]),s._v(" 4. getters实现")]),s._v(" "),t("p",[s._v("Pinia中的 getters 直接使用 computed函数 进行模拟, 组件中需要使用需要把 getters return出去")]),s._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"image.png","data-src":"assets/33.png",loading:"lazy"}})]),s._v(" "),t("h2",{attrs:{id:"_5-action异步实现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-action异步实现"}},[s._v("#")]),s._v(" 5. action异步实现")]),s._v(" "),t("p",[s._v("方式：异步action函数的写法和组件中获取异步数据的写法完全一致")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("接口地址：http://geek.itheima.net/v1_0/channels")])]),s._v(" "),t("li",[t("p",[s._v("请求方式：get")])]),s._v(" "),t("li",[t("p",[s._v("请求参数：无")])])]),s._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"image.png","data-src":"assets/34.png",loading:"lazy"}})]),s._v(" "),t("p",[s._v("需求：在Pinia中获取频道列表数据并把数据渲染App组件的模板中\n"),t("img",{staticClass:"lazy",attrs:{alt:"image.png","data-src":"assets/35.png",loading:"lazy"}})]),s._v(" "),t("h2",{attrs:{id:"_6-storetorefs工具函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-storetorefs工具函数"}},[s._v("#")]),s._v(" 6. storeToRefs工具函数")]),s._v(" "),t("p",[s._v("使用storeToRefs函数可以辅助保持数据（state + getter）的响应式解构\n"),t("img",{staticClass:"lazy",attrs:{alt:"image.png","data-src":"assets/36.png",loading:"lazy"}})]),s._v(" "),t("h2",{attrs:{id:"_7-pinia的调试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-pinia的调试"}},[s._v("#")]),s._v(" 7. Pinia的调试")]),s._v(" "),t("p",[s._v("Vue官方的 dev-tools 调试工具 对 Pinia直接支持，可以直接进行调试\n"),t("img",{staticClass:"lazy",attrs:{alt:"image.png","data-src":"assets/37.png",loading:"lazy"}})]),s._v(" "),t("h2",{attrs:{id:"_8-pinia持久化插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-pinia持久化插件"}},[s._v("#")]),s._v(" 8. Pinia持久化插件")]),s._v(" "),t("p",[s._v("官方文档：https://prazdevs.github.io/pinia-plugin-persistedstate/zh/")]),s._v(" "),t("ol",[t("li",[s._v("安装插件 pinia-plugin-persistedstate")])]),s._v(" "),t("div",{staticClass:"language-jsx line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-jsx"}},[t("code",[s._v("npm i pinia"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("plugin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("persistedstate\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("使用 main.js")])]),s._v(" "),t("div",{staticClass:"language-jsx line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-jsx"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" persist "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pinia-plugin-persistedstate'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\napp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createPinia")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("persist"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("配置 store/counter.js")])]),s._v(" "),t("div",{staticClass:"language-jsx line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-jsx"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" defineStore "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'pinia'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" computed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ref "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vue'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" useCounterStore "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("defineStore")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'counter'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    count"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    doubleCount"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    increment\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("persist")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("其他配置，看官网文档即可")])])])}),[],!1,null,null,null);t.default=e.exports}}]);