<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mybatis练习 | 王豪鸿的个人博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js">
    <link rel="icon" href="/my_blog/favicon.ico">
    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?2675818a983a3131404cee835018f016";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();
      </script>
    <meta name="description" content="贴心的编程学习路线，全面的编程知识百科">
    <meta property="og:site_name" content="王豪鸿的个人博客">
    <meta property="og:title" content="Mybatis练习">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://codefather.cn/mybatis/">
    <meta name="twitter:title" content="Mybatis练习">
    <meta name="twitter:url" content="https://codefather.cn/mybatis/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="程序员, 编程, 计算机">
    <meta property="article:tag" content="程序员">
    <meta name="keywords" content="程序员鱼皮, 编程学习路线, 编程知识百科, Java, 编程导航, 前端, 开发, 编程分享, 项目, IT, 求职, 面经">
    
    <link rel="preload" href="/my_blog/assets/css/0.styles.cc14dc2f.css" as="style"><link rel="preload" href="/my_blog/assets/js/app.635dd26a.js" as="script"><link rel="preload" href="/my_blog/assets/js/2.8c322ccd.js" as="script"><link rel="preload" href="/my_blog/assets/js/44.ae188fd5.js" as="script"><link rel="prefetch" href="/my_blog/assets/js/1.772e8449.js"><link rel="prefetch" href="/my_blog/assets/js/10.d9532d8f.js"><link rel="prefetch" href="/my_blog/assets/js/100.7f496a5e.js"><link rel="prefetch" href="/my_blog/assets/js/101.20d75d4e.js"><link rel="prefetch" href="/my_blog/assets/js/102.a41fef88.js"><link rel="prefetch" href="/my_blog/assets/js/103.87dc1aae.js"><link rel="prefetch" href="/my_blog/assets/js/104.a09771c6.js"><link rel="prefetch" href="/my_blog/assets/js/105.0e53ddf7.js"><link rel="prefetch" href="/my_blog/assets/js/106.6e7ebe50.js"><link rel="prefetch" href="/my_blog/assets/js/107.38d6c9ee.js"><link rel="prefetch" href="/my_blog/assets/js/108.e25593e5.js"><link rel="prefetch" href="/my_blog/assets/js/109.4e601682.js"><link rel="prefetch" href="/my_blog/assets/js/11.2f89b5eb.js"><link rel="prefetch" href="/my_blog/assets/js/110.60c5074b.js"><link rel="prefetch" href="/my_blog/assets/js/111.78017585.js"><link rel="prefetch" href="/my_blog/assets/js/112.96c75f49.js"><link rel="prefetch" href="/my_blog/assets/js/113.d4637c3f.js"><link rel="prefetch" href="/my_blog/assets/js/114.f76b764a.js"><link rel="prefetch" href="/my_blog/assets/js/115.447cdfd3.js"><link rel="prefetch" href="/my_blog/assets/js/116.9d5d3385.js"><link rel="prefetch" href="/my_blog/assets/js/117.c8683949.js"><link rel="prefetch" href="/my_blog/assets/js/118.687118e2.js"><link rel="prefetch" href="/my_blog/assets/js/119.6ce8ec85.js"><link rel="prefetch" href="/my_blog/assets/js/12.f03f0230.js"><link rel="prefetch" href="/my_blog/assets/js/120.fa48d833.js"><link rel="prefetch" href="/my_blog/assets/js/121.956c783d.js"><link rel="prefetch" href="/my_blog/assets/js/122.cafe4404.js"><link rel="prefetch" href="/my_blog/assets/js/123.22c3f590.js"><link rel="prefetch" href="/my_blog/assets/js/124.d816da2d.js"><link rel="prefetch" href="/my_blog/assets/js/125.fdd5b37d.js"><link rel="prefetch" href="/my_blog/assets/js/126.aeda75bb.js"><link rel="prefetch" href="/my_blog/assets/js/127.bf3b4c45.js"><link rel="prefetch" href="/my_blog/assets/js/128.23f648fd.js"><link rel="prefetch" href="/my_blog/assets/js/129.45ee3e2c.js"><link rel="prefetch" href="/my_blog/assets/js/13.52940164.js"><link rel="prefetch" href="/my_blog/assets/js/130.c9475b55.js"><link rel="prefetch" href="/my_blog/assets/js/131.d2853cf3.js"><link rel="prefetch" href="/my_blog/assets/js/132.0a4786ae.js"><link rel="prefetch" href="/my_blog/assets/js/133.1a340322.js"><link rel="prefetch" href="/my_blog/assets/js/134.892ca72c.js"><link rel="prefetch" href="/my_blog/assets/js/135.7df04a85.js"><link rel="prefetch" href="/my_blog/assets/js/136.293d1f17.js"><link rel="prefetch" href="/my_blog/assets/js/137.ef6d9e7a.js"><link rel="prefetch" href="/my_blog/assets/js/138.b5dff5fc.js"><link rel="prefetch" href="/my_blog/assets/js/139.5a4f2a98.js"><link rel="prefetch" href="/my_blog/assets/js/14.ade1e74d.js"><link rel="prefetch" href="/my_blog/assets/js/140.869f6784.js"><link rel="prefetch" href="/my_blog/assets/js/141.65c84fa0.js"><link rel="prefetch" href="/my_blog/assets/js/142.1998d8d4.js"><link rel="prefetch" href="/my_blog/assets/js/143.efae150a.js"><link rel="prefetch" href="/my_blog/assets/js/144.64925202.js"><link rel="prefetch" href="/my_blog/assets/js/145.3f77074c.js"><link rel="prefetch" href="/my_blog/assets/js/146.cfa3c288.js"><link rel="prefetch" href="/my_blog/assets/js/147.80fb2b19.js"><link rel="prefetch" href="/my_blog/assets/js/148.ec7b1938.js"><link rel="prefetch" href="/my_blog/assets/js/149.dcb3a37a.js"><link rel="prefetch" href="/my_blog/assets/js/15.970a8ca5.js"><link rel="prefetch" href="/my_blog/assets/js/150.08cb63f6.js"><link rel="prefetch" href="/my_blog/assets/js/151.5d70b236.js"><link rel="prefetch" href="/my_blog/assets/js/152.dddff763.js"><link rel="prefetch" href="/my_blog/assets/js/153.66a5dab1.js"><link rel="prefetch" href="/my_blog/assets/js/154.7c6c2476.js"><link rel="prefetch" href="/my_blog/assets/js/155.6e98a6ab.js"><link rel="prefetch" href="/my_blog/assets/js/156.46483400.js"><link rel="prefetch" href="/my_blog/assets/js/157.3c1ede39.js"><link rel="prefetch" href="/my_blog/assets/js/158.be691a46.js"><link rel="prefetch" href="/my_blog/assets/js/159.0b6d9989.js"><link rel="prefetch" href="/my_blog/assets/js/16.ff971500.js"><link rel="prefetch" href="/my_blog/assets/js/160.971174fe.js"><link rel="prefetch" href="/my_blog/assets/js/161.17a5abe8.js"><link rel="prefetch" href="/my_blog/assets/js/162.80ac8118.js"><link rel="prefetch" href="/my_blog/assets/js/163.bdd662af.js"><link rel="prefetch" href="/my_blog/assets/js/164.896e9db5.js"><link rel="prefetch" href="/my_blog/assets/js/165.e5354833.js"><link rel="prefetch" href="/my_blog/assets/js/166.051e8511.js"><link rel="prefetch" href="/my_blog/assets/js/167.8d230ad6.js"><link rel="prefetch" href="/my_blog/assets/js/168.56120141.js"><link rel="prefetch" href="/my_blog/assets/js/169.4d027f04.js"><link rel="prefetch" href="/my_blog/assets/js/17.4b045b26.js"><link rel="prefetch" href="/my_blog/assets/js/170.70abf7bb.js"><link rel="prefetch" href="/my_blog/assets/js/171.49f0fe10.js"><link rel="prefetch" href="/my_blog/assets/js/172.e278b1de.js"><link rel="prefetch" href="/my_blog/assets/js/173.001ea5ca.js"><link rel="prefetch" href="/my_blog/assets/js/174.1e600aa9.js"><link rel="prefetch" href="/my_blog/assets/js/175.8517fbe7.js"><link rel="prefetch" href="/my_blog/assets/js/176.d6a0de4c.js"><link rel="prefetch" href="/my_blog/assets/js/177.5ff4a06f.js"><link rel="prefetch" href="/my_blog/assets/js/178.4bf51de9.js"><link rel="prefetch" href="/my_blog/assets/js/179.81a72fcf.js"><link rel="prefetch" href="/my_blog/assets/js/18.d0f0bd51.js"><link rel="prefetch" href="/my_blog/assets/js/180.a5f7855b.js"><link rel="prefetch" href="/my_blog/assets/js/181.6ed81a04.js"><link rel="prefetch" href="/my_blog/assets/js/182.200607d2.js"><link rel="prefetch" href="/my_blog/assets/js/183.012650d7.js"><link rel="prefetch" href="/my_blog/assets/js/184.fa2f8f2d.js"><link rel="prefetch" href="/my_blog/assets/js/185.f98684ec.js"><link rel="prefetch" href="/my_blog/assets/js/186.3a121541.js"><link rel="prefetch" href="/my_blog/assets/js/187.db3d1ff9.js"><link rel="prefetch" href="/my_blog/assets/js/188.e696e8cd.js"><link rel="prefetch" href="/my_blog/assets/js/189.ba5c9f0d.js"><link rel="prefetch" href="/my_blog/assets/js/19.5740e4d6.js"><link rel="prefetch" href="/my_blog/assets/js/190.0d5ec908.js"><link rel="prefetch" href="/my_blog/assets/js/191.622ad6a0.js"><link rel="prefetch" href="/my_blog/assets/js/192.457e0d8f.js"><link rel="prefetch" href="/my_blog/assets/js/193.e6d2508f.js"><link rel="prefetch" href="/my_blog/assets/js/194.842ffb8d.js"><link rel="prefetch" href="/my_blog/assets/js/195.e4ddcdb0.js"><link rel="prefetch" href="/my_blog/assets/js/196.7c177169.js"><link rel="prefetch" href="/my_blog/assets/js/197.bc8c3a0f.js"><link rel="prefetch" href="/my_blog/assets/js/198.a4ff29cb.js"><link rel="prefetch" href="/my_blog/assets/js/199.872babb0.js"><link rel="prefetch" href="/my_blog/assets/js/20.8885a4fa.js"><link rel="prefetch" href="/my_blog/assets/js/200.2c7c7511.js"><link rel="prefetch" href="/my_blog/assets/js/201.67a1b971.js"><link rel="prefetch" href="/my_blog/assets/js/202.f1672012.js"><link rel="prefetch" href="/my_blog/assets/js/203.6f579360.js"><link rel="prefetch" href="/my_blog/assets/js/204.9ea95b93.js"><link rel="prefetch" href="/my_blog/assets/js/205.9a4700a2.js"><link rel="prefetch" href="/my_blog/assets/js/21.0bb62db4.js"><link rel="prefetch" href="/my_blog/assets/js/22.3e8347a6.js"><link rel="prefetch" href="/my_blog/assets/js/23.ceb5a5ff.js"><link rel="prefetch" href="/my_blog/assets/js/24.5bc56ac4.js"><link rel="prefetch" href="/my_blog/assets/js/25.15e1f641.js"><link rel="prefetch" href="/my_blog/assets/js/26.35b2bbdc.js"><link rel="prefetch" href="/my_blog/assets/js/27.4dc8b9ac.js"><link rel="prefetch" href="/my_blog/assets/js/28.4af8f80c.js"><link rel="prefetch" href="/my_blog/assets/js/29.67ed3789.js"><link rel="prefetch" href="/my_blog/assets/js/3.4dc033c7.js"><link rel="prefetch" href="/my_blog/assets/js/30.ae2784fd.js"><link rel="prefetch" href="/my_blog/assets/js/31.79fc4cca.js"><link rel="prefetch" href="/my_blog/assets/js/32.34ba096a.js"><link rel="prefetch" href="/my_blog/assets/js/33.ff97c22d.js"><link rel="prefetch" href="/my_blog/assets/js/34.0c16964d.js"><link rel="prefetch" href="/my_blog/assets/js/35.2f3dfc25.js"><link rel="prefetch" href="/my_blog/assets/js/36.21513e30.js"><link rel="prefetch" href="/my_blog/assets/js/37.1ade0b6b.js"><link rel="prefetch" href="/my_blog/assets/js/38.a53d9aa2.js"><link rel="prefetch" href="/my_blog/assets/js/39.91d0314d.js"><link rel="prefetch" href="/my_blog/assets/js/4.2f502b73.js"><link rel="prefetch" href="/my_blog/assets/js/40.6ffc2f2f.js"><link rel="prefetch" href="/my_blog/assets/js/41.5c741871.js"><link rel="prefetch" href="/my_blog/assets/js/42.0622d880.js"><link rel="prefetch" href="/my_blog/assets/js/43.2dbf1a05.js"><link rel="prefetch" href="/my_blog/assets/js/45.6aaf491b.js"><link rel="prefetch" href="/my_blog/assets/js/46.26a7558c.js"><link rel="prefetch" href="/my_blog/assets/js/47.a85fd1c7.js"><link rel="prefetch" href="/my_blog/assets/js/48.84c0525f.js"><link rel="prefetch" href="/my_blog/assets/js/49.6ca5e036.js"><link rel="prefetch" href="/my_blog/assets/js/5.7b1f056c.js"><link rel="prefetch" href="/my_blog/assets/js/50.384dc640.js"><link rel="prefetch" href="/my_blog/assets/js/51.32b7f05c.js"><link rel="prefetch" href="/my_blog/assets/js/52.bad7c0ce.js"><link rel="prefetch" href="/my_blog/assets/js/53.9b447cff.js"><link rel="prefetch" href="/my_blog/assets/js/54.0c7dda5f.js"><link rel="prefetch" href="/my_blog/assets/js/55.4c6dc400.js"><link rel="prefetch" href="/my_blog/assets/js/56.b6408150.js"><link rel="prefetch" href="/my_blog/assets/js/57.217d8e70.js"><link rel="prefetch" href="/my_blog/assets/js/58.81b706d7.js"><link rel="prefetch" href="/my_blog/assets/js/59.66988ac4.js"><link rel="prefetch" href="/my_blog/assets/js/6.056886f1.js"><link rel="prefetch" href="/my_blog/assets/js/60.c8b9f2dd.js"><link rel="prefetch" href="/my_blog/assets/js/61.933d6bc2.js"><link rel="prefetch" href="/my_blog/assets/js/62.284fe6dc.js"><link rel="prefetch" href="/my_blog/assets/js/63.6ae39b81.js"><link rel="prefetch" href="/my_blog/assets/js/64.c41b8c3e.js"><link rel="prefetch" href="/my_blog/assets/js/65.193dfc9c.js"><link rel="prefetch" href="/my_blog/assets/js/66.637444b0.js"><link rel="prefetch" href="/my_blog/assets/js/67.2a3522be.js"><link rel="prefetch" href="/my_blog/assets/js/68.faeeac3e.js"><link rel="prefetch" href="/my_blog/assets/js/69.20dc7b82.js"><link rel="prefetch" href="/my_blog/assets/js/7.a96cecf9.js"><link rel="prefetch" href="/my_blog/assets/js/70.da36114b.js"><link rel="prefetch" href="/my_blog/assets/js/71.6fbd8e70.js"><link rel="prefetch" href="/my_blog/assets/js/72.c568b0f5.js"><link rel="prefetch" href="/my_blog/assets/js/73.713060cb.js"><link rel="prefetch" href="/my_blog/assets/js/74.5d59f502.js"><link rel="prefetch" href="/my_blog/assets/js/75.f9f0e2db.js"><link rel="prefetch" href="/my_blog/assets/js/76.9ba26d3e.js"><link rel="prefetch" href="/my_blog/assets/js/77.aabf7684.js"><link rel="prefetch" href="/my_blog/assets/js/78.4b0dd6f9.js"><link rel="prefetch" href="/my_blog/assets/js/79.752cd1f0.js"><link rel="prefetch" href="/my_blog/assets/js/80.85b1b643.js"><link rel="prefetch" href="/my_blog/assets/js/81.3c598aba.js"><link rel="prefetch" href="/my_blog/assets/js/82.9d699c63.js"><link rel="prefetch" href="/my_blog/assets/js/83.93a6435f.js"><link rel="prefetch" href="/my_blog/assets/js/84.3b3afd32.js"><link rel="prefetch" href="/my_blog/assets/js/85.a3d25dc8.js"><link rel="prefetch" href="/my_blog/assets/js/86.f6f12160.js"><link rel="prefetch" href="/my_blog/assets/js/87.363996a0.js"><link rel="prefetch" href="/my_blog/assets/js/88.be742599.js"><link rel="prefetch" href="/my_blog/assets/js/89.7772dc30.js"><link rel="prefetch" href="/my_blog/assets/js/90.0911110b.js"><link rel="prefetch" href="/my_blog/assets/js/91.bef042a5.js"><link rel="prefetch" href="/my_blog/assets/js/92.b0acba51.js"><link rel="prefetch" href="/my_blog/assets/js/93.5abf03c5.js"><link rel="prefetch" href="/my_blog/assets/js/94.0d0e3aed.js"><link rel="prefetch" href="/my_blog/assets/js/95.058d6fb6.js"><link rel="prefetch" href="/my_blog/assets/js/96.cb258da8.js"><link rel="prefetch" href="/my_blog/assets/js/97.ff426b0d.js"><link rel="prefetch" href="/my_blog/assets/js/98.8554c306.js"><link rel="prefetch" href="/my_blog/assets/js/99.89385204.js"><link rel="prefetch" href="/my_blog/assets/js/vendors~docsearch.9f962556.js">
    <link rel="stylesheet" href="/my_blog/assets/css/0.styles.cc14dc2f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my_blog/" class="home-link router-link-active"><img src="/my_blog/logo.png" alt="王豪鸿的个人博客" class="logo"> <span class="site-name can-hide">王豪鸿的个人博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/my_blog/个人简历/" class="nav-link">
  个人简历
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><span class="title">学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习笔记" class="mobile-dropdown-title"><span class="title">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#后端相关" class="nav-link">
  后端相关
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#前端开发" class="nav-link">
  前端开发
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#408相关" class="nav-link">
  408相关
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#小程序开发" class="nav-link">
  小程序开发
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#专业课" class="nav-link">
  专业课
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#AI知识" class="nav-link">
  AI知识
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#C语言" class="nav-link">
  C语言
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#JavaWeb" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#Spring&amp;SpringBoot" class="nav-link">
  Spring&amp;SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#Vue2学习" class="nav-link">
  Vue2学习
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#Vue3学习" class="nav-link">
  Vue3学习
</a></li></ul></div></div><div class="nav-item"><a href="/my_blog/项目实战/" class="nav-link">
  项目实战
</a></div><div class="nav-item"><a href="/my_blog/知识碎片/" class="nav-link">
  技术知识
</a></div><div class="nav-item"><a href="/my_blog/学习路线/" class="nav-link">
  学习路线
</a></div><div class="nav-item"><a href="/my_blog/作者/" class="nav-link">
  作者
</a></div> <a href="https://github.com/liyupi/codefather" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/my_blog/个人简历/" class="nav-link">
  个人简历
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><span class="title">学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习笔记" class="mobile-dropdown-title"><span class="title">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#后端相关" class="nav-link">
  后端相关
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#前端开发" class="nav-link">
  前端开发
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#408相关" class="nav-link">
  408相关
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#小程序开发" class="nav-link">
  小程序开发
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#专业课" class="nav-link">
  专业课
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#AI知识" class="nav-link">
  AI知识
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#C语言" class="nav-link">
  C语言
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#JavaWeb" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#Spring&amp;SpringBoot" class="nav-link">
  Spring&amp;SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#Vue2学习" class="nav-link">
  Vue2学习
</a></li><li class="dropdown-item"><!----> <a href="/my_blog/学习笔记/#Vue3学习" class="nav-link">
  Vue3学习
</a></li></ul></div></div><div class="nav-item"><a href="/my_blog/项目实战/" class="nav-link">
  项目实战
</a></div><div class="nav-item"><a href="/my_blog/知识碎片/" class="nav-link">
  技术知识
</a></div><div class="nav-item"><a href="/my_blog/学习路线/" class="nav-link">
  学习路线
</a></div><div class="nav-item"><a href="/my_blog/作者/" class="nav-link">
  作者
</a></div> <a href="https://github.com/liyupi/codefather" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/my_blog/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="sidebar-link">王豪鸿的笔记</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>408相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>后端相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>课程复习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AI知识</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>C语言</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaWeb</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my_blog/mybatis/" aria-current="page" class="active sidebar-link">Mybatis练习</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my_blog/mybatis/#_1-配置文件实现crud" class="sidebar-link">1，配置文件实现CRUD</a></li><li class="sidebar-sub-header"><a href="/my_blog/mybatis/#_2-注解实现crud" class="sidebar-link">2，注解实现CRUD</a></li></ul></li><li><a href="/my_blog/javascript/" class="sidebar-link">JavaScript</a></li><li><a href="/my_blog/html/" class="sidebar-link">HTML</a></li><li><a href="/my_blog/html-css/" class="sidebar-link">HTML&amp;CSS</a></li><li><a href="/my_blog/request-response/" class="sidebar-link">Request&amp;Response</a></li><li><a href="/my_blog/%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF/" class="sidebar-link">会话技术</a></li><li><a href="/my_blog/vue-element-%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/" class="sidebar-link">VUE&amp;Element</a></li><li><a href="/my_blog/%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B/" class="sidebar-link">综合案例</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring&amp;SpringBoot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue2学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue3学习</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="content"><div style="width:100%"><div class="theme-default-content custom-content content__default"><h1 id="mybatis练习"><a href="#mybatis练习" class="header-anchor">#</a> Mybatis练习</h1> <p><strong>目标</strong></p> <blockquote><ul><li>能够使用映射配置文件实现CRUD操作</li> <li>能够使用注解实现CRUD操作</li></ul></blockquote> <h2 id="_1-配置文件实现crud"><a href="#_1-配置文件实现crud" class="header-anchor">#</a> 1，配置文件实现CRUD</h2> <p><img alt="image-20210729111159534" data-src="/assets/image-20210729111159534.png" loading="lazy" class="lazy"></p> <p>如上图所示产品原型，里面包含了品牌数据的 <code>查询</code> 、<code>按条件查询</code>、<code>添加</code>、<code>删除</code>、<code>批量删除</code>、<code>修改</code> 等功能，而这些功能其实就是对数据库表中的数据进行CRUD操作。接下来我们就使用Mybatis完成品牌数据的增删改查操作。以下是我们要完成功能列表：</p> <blockquote><ul><li>查询
<ul><li>查询所有数据</li> <li>查询详情</li> <li>条件查询</li></ul></li> <li>添加</li> <li>修改
<ul><li>修改全部字段</li> <li>修改动态字段</li></ul></li> <li>删除
<ul><li>删除一个</li> <li>批量删除</li></ul></li></ul></blockquote> <p>我们先将必要的环境准备一下。</p> <h3 id="_1-1-环境准备"><a href="#_1-1-环境准备" class="header-anchor">#</a> 1.1  环境准备</h3> <ul><li><p>数据库表（tb_brand）及数据准备</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 删除tb_brand表</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> tb_brand<span class="token punctuation">;</span>
<span class="token comment">-- 创建tb_brand表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> tb_brand
<span class="token punctuation">(</span>
    <span class="token comment">-- id 主键</span>
    id           <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    <span class="token comment">-- 品牌名称</span>
    brand_name   <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">-- 企业名称</span>
    company_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">-- 排序字段</span>
    ordered      <span class="token keyword">int</span><span class="token punctuation">,</span>
    <span class="token comment">-- 描述信息</span>
    description  <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">-- 状态：0：禁用  1：启用</span>
    <span class="token keyword">status</span>       <span class="token keyword">int</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 添加数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> tb_brand <span class="token punctuation">(</span>brand_name<span class="token punctuation">,</span> company_name<span class="token punctuation">,</span> ordered<span class="token punctuation">,</span> description<span class="token punctuation">,</span> <span class="token keyword">status</span><span class="token punctuation">)</span>
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'三只松鼠'</span><span class="token punctuation">,</span> <span class="token string">'三只松鼠股份有限公司'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'好吃不上火'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token string">'华为'</span><span class="token punctuation">,</span> <span class="token string">'华为技术有限公司'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">'华为致力于把数字世界带入每个人、每个家庭、每个组织，构建万物互联的智能世界'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token string">'小米'</span><span class="token punctuation">,</span> <span class="token string">'小米科技有限公司'</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token string">'are you ok'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></li> <li><p>实体类 Brand</p> <p>在 <code>com.itheima.pojo</code> 包下创建 Brand 实体类。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Brand</span> <span class="token punctuation">{</span>
    <span class="token comment">// id 主键</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token comment">// 品牌名称</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> brandName<span class="token punctuation">;</span>
    <span class="token comment">// 企业名称</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> companyName<span class="token punctuation">;</span>
    <span class="token comment">// 排序字段</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> ordered<span class="token punctuation">;</span>
    <span class="token comment">// 描述信息</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> description<span class="token punctuation">;</span>
    <span class="token comment">// 状态：0：禁用  1：启用</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> status<span class="token punctuation">;</span>
    
    <span class="token comment">//省略 setter and getter。自己写时要补全这部分代码</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li> <li><p>编写测试用例</p> <p>测试代码需要在 <code>test/java</code> 目录下创建包及测试用例。项目结构如下：</p> <img src="/assets/image-20210729112907106.png" alt="image-20210729112907106" style="zoom:80%;"></li> <li><p>安装 MyBatisX 插件</p> <ul><li><p>MybatisX 是一款基于 IDEA 的快速开发插件，为效率而生。</p></li> <li><p>主要功能</p> <ul><li>XML映射配置文件 和 接口方法 间相互跳转</li> <li>根据接口方法生成 statement</li></ul></li> <li><p>安装方式</p> <p>点击 <code>file</code> ，选择 <code>settings</code> ，就能看到如下图所示界面</p> <img src="/assets/image-20210729113304743.png" alt="image-20210729113304743" style="zoom:80%;"> <blockquote><p>注意：安装完毕后需要重启IDEA</p></blockquote></li> <li><p>插件效果</p> <img src="/assets/image-20210729164450524.png" alt="image-20210729164450524" style="zoom:70%;"> <p>红色头绳的表示映射配置文件，蓝色头绳的表示mapper接口。在mapper接口点击红色头绳的小鸟图标会自动跳转到对应的映射配置文件，在映射配置文件中点击蓝色头绳的小鸟图标会自动跳转到对应的mapper接口。也可以在mapper接口中定义方法，自动生成映射配置文件中的 <code>statement</code> ，如图所示</p> <p><img alt="image-20210729165337223" data-src="/assets/image-20210729165337223.png" loading="lazy" class="lazy"></p></li></ul></li></ul> <h3 id="_1-2-查询所有数据"><a href="#_1-2-查询所有数据" class="header-anchor">#</a> 1.2  查询所有数据</h3> <img src="/assets/image-20210729165724838.png" alt="image-20210729165724838" style="zoom:80%;"> <p>如上图所示就页面上展示的数据，而这些数据需要从数据库进行查询。接下来我们就来讲查询所有数据功能，而实现该功能我们分以下步骤进行实现：</p> <ul><li><p>编写接口方法：Mapper接口</p> <ul><li><p>参数：无</p> <p>查询所有数据功能是不需要根据任何条件进行查询的，所以此方法不需要参数。</p> <img src="/assets/image-20210729171208737.png" alt="image-20210729171208737" style="zoom:80%;"></li> <li><p>结果：List/<Brand></Brand></p> <p>我们会将查询出来的每一条数据封装成一个 <code>Brand</code> 对象，而多条数据封装多个 <code>Brand</code> 对象，需要将这些对象封装到List集合中返回。</p> <img src="/assets/image-20210729171146911.png" alt="image-20210729171146911" style="zoom:80%;"></li> <li><p>执行方法、测试</p></li></ul></li></ul> <h4 id="_1-2-1-编写接口方法"><a href="#_1-2-1-编写接口方法" class="header-anchor">#</a> 1.2.1  编写接口方法</h4> <p>在 <code>com.itheima.mapper</code> 包写创建名为 <code>BrandMapper</code> 的接口。并在该接口中定义 <code>List&lt;Brand&gt; selectAll()</code> 方法。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BrandMapper</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * 查询所有
     */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_1-2-2-编写sql语句"><a href="#_1-2-2-编写sql语句" class="header-anchor">#</a> 1.2.2  编写SQL语句</h4> <p>在 <code>reources</code> 下创建 <code>com/itheima/mapper</code> 目录结构，并在该目录下创建名为 <code>BrandMapper.xml</code> 的映射配置文件</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.itheima.mapper.BrandMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select *
        from tb_brand;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_1-2-3-编写测试方法"><a href="#_1-2-3-编写测试方法" class="header-anchor">#</a> 1.2.3  编写测试方法</h4> <p>在 <code>MybatisTest</code> 类中编写测试查询所有的方法</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//1. 获取SqlSessionFactory</span>
    <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//2. 获取SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//3. 获取Mapper接口的代理对象</span>
    <span class="token class-name">BrandMapper</span> brandMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BrandMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//4. 执行方法</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> brands <span class="token operator">=</span> brandMapper<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>brands<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//5. 释放资源</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><blockquote><p>注意：现在我们感觉测试这部分代码写起来特别麻烦，我们可以先忍忍。以后我们只会写上面的第3步的代码，其他的都不需要我们来完成。</p></blockquote> <p>执行测试方法结果如下：</p> <p><img alt="image-20210729172544230" data-src="/assets/image-20210729172544230.png" loading="lazy" class="lazy"></p> <p>从上面结果我们看到了问题，有些数据封装成功了，而有些数据并没有封装成功。为什么这样呢？</p> <p>这个问题可以通过两种方式进行解决：</p> <ul><li>给字段起别名</li> <li>使用resultMap定义字段和属性的映射关系</li></ul> <h4 id="_1-2-4-起别名解决上述问题"><a href="#_1-2-4-起别名解决上述问题" class="header-anchor">#</a> 1.2.4  起别名解决上述问题</h4> <p>从上面结果可以看到 <code>brandName</code> 和 <code>companyName</code> 这两个属性的数据没有封装成功，查询 实体类 和 表中的字段 发现，在实体类中属性名是 <code>brandName</code> 和 <code>companyName</code> ，而表中的字段名为 <code>brand_name</code> 和 <code>company_name</code>，如下图所示 。那么我们只需要保持这两部分的名称一致这个问题就迎刃而解。</p> <img src="/assets/image-20210729173210433.png" alt="image-20210729173210433" style="zoom:80%;"> <p>我们可以在写sql语句时给这两个字段起别名，将别名定义成和属性名一致即可。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select
    id, brand_name as brandName, company_name as companyName, ordered, description, status
    from tb_brand;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>而上面的SQL语句中的字段列表书写麻烦，如果表中还有更多的字段，同时其他的功能也需要查询这些字段时就显得我们的代码不够精炼。Mybatis提供了<code>sql</code> 片段可以提高sql的复用性。</p> <p><strong>SQL片段：</strong></p> <ul><li><p>将需要复用的SQL片段抽取到 <code>sql</code> 标签中</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand_column<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	id, brand_name as brandName, company_name as companyName, ordered, description, status
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>id属性值是唯一标识，引用时也是通过该值进行引用。</p></li> <li><p>在原sql语句中进行引用</p> <p>使用 <code>include</code> 标签引用上述的 SQL 片段，而 <code>refid</code> 指定上述 SQL 片段的id值。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand_column<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    from tb_brand;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <h4 id="_1-2-5-使用resultmap解决上述问题"><a href="#_1-2-5-使用resultmap解决上述问题" class="header-anchor">#</a> 1.2.5  使用resultMap解决上述问题</h4> <p>起别名 + sql片段的方式可以解决上述问题，但是它也存在问题。如果还有功能只需要查询部分字段，而不是查询所有字段，那么我们就需要再定义一个 SQL 片段，这就显得不是那么灵活。</p> <p>那么我们也可以使用resultMap来定义字段和属性的映射关系的方式解决上述问题。</p> <ul><li><p>在映射配置文件中使用resultMap定义 字段 和 属性 的映射关系</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--
            id：完成主键字段的映射
                column：表的列名
                property：实体类的属性名
            result：完成一般字段的映射
                column：表的列名
                property：实体类的属性名
        --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>company_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>companyName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>注意：在上面只需要定义 字段名 和 属性名 不一样的映射，而一样的则不需要专门定义出来。</p></blockquote></li> <li><p>SQL语句正常编写</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h4 id="_1-2-6-小结"><a href="#_1-2-6-小结" class="header-anchor">#</a> 1.2.6  小结</h4> <p>实体类属性名 和 数据库表列名 不一致，不能自动封装数据</p> <ul><li>==起别名：==在SQL语句中，对不一样的列名起别名，别名和实体类属性名一样
<ul><li>可以定义 <code>&lt;sql&gt;</code>片段，提升复用性</li></ul></li> <li>==resultMap：==定义<code>&lt;resultMap&gt;</code> 完成不一致的属性名和列名的映射</li></ul> <p>而我们最终选择使用 resultMap的方式。查询映射配置文件中查询所有的 statement 书写如下：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token comment">&lt;!--
            id：完成主键字段的映射
                column：表的列名
                property：实体类的属性名
            result：完成一般字段的映射
                column：表的列名
                property：实体类的属性名
        --&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>company_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>companyName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>



<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectAll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_1-3-查询详情"><a href="#_1-3-查询详情" class="header-anchor">#</a> 1.3  查询详情</h3> <img src="/assets/image-20210729180118287.png" alt="image-20210729180118287" style="zoom:80%;"> <p>有些数据的属性比较多，在页面表格中无法全部实现，而只会显示部分，而其他属性数据的查询可以通过 <code>查看详情</code> 来进行查询，如上图所示。</p> <p>查看详情功能实现步骤：</p> <ul><li><p>编写接口方法：Mapper接口</p> <img src="/assets/image-20210729180604529.png" alt="image-20210729180604529" style="zoom:80%;"> <ul><li><p>参数：id</p> <p>查看详情就是查询某一行数据，所以需要根据id进行查询。而id以后是由页面传递过来。</p></li> <li><p>结果：Brand</p> <p>根据id查询出来的数据只要一条，而将一条数据封装成一个Brand对象即可</p></li></ul></li> <li><p>编写SQL语句：SQL映射文件</p> <img src="/assets/image-20210729180709318.png" alt="image-20210729180709318" style="zoom:80%;"></li> <li><p>执行方法、进行测试</p></li></ul> <h4 id="_1-3-1-编写接口方法"><a href="#_1-3-1-编写接口方法" class="header-anchor">#</a> 1.3.1  编写接口方法</h4> <p>在 <code>BrandMapper</code> 接口中定义根据id查询数据的方法</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
  * 查看详情：根据Id查询
  */</span>
<span class="token class-name">Brand</span> <span class="token function">selectById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_1-3-2-编写sql语句"><a href="#_1-3-2-编写sql语句" class="header-anchor">#</a> 1.3.2  编写SQL语句</h4> <p>在 <code>BrandMapper.xml</code> 映射配置文件中编写 <code>statement</code>，使用 <code>resultMap</code> 而不是使用 <code>resultType</code></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectById<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand where id = #{id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>注意：上述SQL中的 #{id}先这样写，一会我们再详细讲解</p></blockquote> <h4 id="_1-3-3-编写测试方法"><a href="#_1-3-3-编写测试方法" class="header-anchor">#</a> 1.3.3  编写测试方法</h4> <p>在 <code>test/java</code> 下的 <code>com.itheima.mapper</code>  包下的 <code>MybatisTest类中</code> 定义测试方法</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//接收参数，该id以后需要传递过来</span>
    <span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token comment">//1. 获取SqlSessionFactory</span>
    <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//2. 获取SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//3. 获取Mapper接口的代理对象</span>
    <span class="token class-name">BrandMapper</span> brandMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BrandMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//4. 执行方法</span>
    <span class="token class-name">Brand</span> brand <span class="token operator">=</span> brandMapper<span class="token punctuation">.</span><span class="token function">selectById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//5. 释放资源</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>执行测试方法结果如下：</p> <img src="/assets/image-20210729182223137.png" alt="image-20210729182223137" style="zoom:70%;"> <h4 id="_1-3-4-参数占位符"><a href="#_1-3-4-参数占位符" class="header-anchor">#</a> 1.3.4  参数占位符</h4> <p>查询到的结果很好理解就是id为1的这行数据。而这里我们需要看控制台显示的SQL语句，能看到使用？进行占位。说明我们在映射配置文件中的写的 <code>#{id}</code> 最终会被？进行占位。接下来我们就聊聊映射配置文件中的参数占位符。</p> <p>mybatis提供了两种参数占位符：</p> <ul><li><p>#{} ：执行SQL时，会将 #{} 占位符替换为？，将来自动设置参数值。从上述例子可以看出使用#{} 底层使用的是 <code>PreparedStatement</code></p></li> <li><p>${} ：拼接SQL。底层使用的是 <code>Statement</code>，会存在SQL注入问题。如下图将 映射配置文件中的 #{} 替换成 ${} 来看效果</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectById<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand where id = ${id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>重新运行查看结果如下：</p> <img src="/assets/image-20210729184156019.png" alt="image-20210729184156019" style="zoom:70%;"></li></ul> <blockquote><p>==注意：==从上面两个例子可以看出，以后开发我们使用 #{} 参数占位符。</p></blockquote> <h4 id="_1-3-5-parametertype使用"><a href="#_1-3-5-parametertype使用" class="header-anchor">#</a> 1.3.5  parameterType使用</h4> <p>对于有参数的mapper接口方法，我们在映射配置文件中应该配置 <code>ParameterType</code> 来指定参数类型。只不过该属性都可以省略。如下图：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand where id = ${id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_1-3-6-sql语句中特殊字段处理"><a href="#_1-3-6-sql语句中特殊字段处理" class="header-anchor">#</a> 1.3.6  SQL语句中特殊字段处理</h4> <p>以后肯定会在SQL语句中写一下特殊字符，比如某一个字段大于某个值，如下图</p> <img src="/assets/image-20210729184756094.png" alt="image-20210729184756094" style="zoom:80%;"> <p>可以看出报错了，因为映射配置文件是xml类型的问题，而 &gt; &lt; 等这些字符在xml中有特殊含义，所以此时我们需要将这些符号进行转义，可以使用以下两种方式进行转义</p> <ul><li><p>转义字符</p> <p>下图的 <code>&amp;lt;</code> 就是 <code>&lt;</code> 的转义字符。</p> <img src="/assets/image-20210729185128686.png" alt="image-20210729185128686" style="zoom:60%;"></li> <li><img src="/assets/image-20210729185030318.png" alt="image-20210729185030318" style="zoom:60%;"></li></ul> <h3 id="_1-4-多条件查询"><a href="#_1-4-多条件查询" class="header-anchor">#</a> 1.4  多条件查询</h3> <p><img alt="image-20210729203804276" data-src="/assets/image-20210729203804276.png" loading="lazy" class="lazy"></p> <p>我们经常会遇到如上图所示的多条件查询，将多条件查询的结果展示在下方的数据列表中。而我们做这个功能需要分析最终的SQL语句应该是什么样，思考两个问题</p> <ul><li>条件表达式</li> <li>如何连接</li></ul> <p>条件字段 <code>企业名称</code>  和 <code>品牌名称</code> 需要进行模糊查询，所以条件应该是：</p> <img src="/assets/image-20210729204458815.png" alt="image-20210729204458815" style="zoom:70%;"> <p>简单的分析后，我们来看功能实现的步骤：</p> <ul><li><p>编写接口方法</p> <ul><li>参数：所有查询条件</li> <li>结果：List<code>&lt;Brand&gt;</code></li></ul></li> <li><p>在映射配置文件中编写SQL语句</p></li> <li><p>编写测试方法并执行</p></li></ul> <h4 id="_1-4-1-编写接口方法"><a href="#_1-4-1-编写接口方法" class="header-anchor">#</a> 1.4.1  编写接口方法</h4> <p>在 <code>BrandMapper</code> 接口中定义多条件查询的方法。</p> <p>而该功能有三个参数，我们就需要考虑定义接口时，参数应该如何定义。Mybatis针对多参数有多种实现</p> <ul><li><p>使用 <code>@Param(&quot;参数名称&quot;)</code> 标记每一个参数，在映射配置文件中就需要使用 <code>#{参数名称}</code> 进行占位</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectByCondition</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> status<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;companyName&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> companyName<span class="token punctuation">,</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;brandName&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> brandName<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>将多个参数封装成一个 实体对象 ，将该实体对象作为接口的方法参数。该方式要求在映射配置文件的SQL中使用 <code>#{内容}</code> 时，里面的内容必须和实体类属性名保持一致。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectByCondition</span><span class="token punctuation">(</span><span class="token class-name">Brand</span> brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>将多个参数封装到map集合中，将map集合作为接口的方法参数。该方式要求在映射配置文件的SQL中使用 <code>#{内容}</code> 时，里面的内容必须和map集合中键的名称一致。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>List&lt;Brand&gt; selectByCondition(Map map);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h4 id="_1-4-2-编写sql语句"><a href="#_1-4-2-编写sql语句" class="header-anchor">#</a> 1.4.2  编写SQL语句</h4> <p>在 <code>BrandMapper.xml</code> 映射配置文件中编写 <code>statement</code>，使用 <code>resultMap</code> 而不是使用 <code>resultType</code></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectByCondition<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand
    where status = #{status}
    and company_name like #{companyName}
    and brand_name like #{brandName}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_1-4-3-编写测试方法"><a href="#_1-4-3-编写测试方法" class="header-anchor">#</a> 1.4.3  编写测试方法</h4> <p>在 <code>test/java</code> 下的 <code>com.itheima.mapper</code>  包下的 <code>MybatisTest类中</code> 定义测试方法</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectByCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//接收参数</span>
    <span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> companyName <span class="token operator">=</span> <span class="token string">&quot;华为&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> brandName <span class="token operator">=</span> <span class="token string">&quot;华为&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 处理参数</span>
    companyName <span class="token operator">=</span> <span class="token string">&quot;%&quot;</span> <span class="token operator">+</span> companyName <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span><span class="token punctuation">;</span>
    brandName <span class="token operator">=</span> <span class="token string">&quot;%&quot;</span> <span class="token operator">+</span> brandName <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">//1. 获取SqlSessionFactory</span>
    <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. 获取SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//3. 获取Mapper接口的代理对象</span>
    <span class="token class-name">BrandMapper</span> brandMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BrandMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//4. 执行方法</span>
	<span class="token comment">//方式一 ：接口方法参数使用 @Param 方式调用的方法</span>
    <span class="token comment">//List&lt;Brand&gt; brands = brandMapper.selectByCondition(status, companyName, brandName);</span>
    <span class="token comment">//方式二 ：接口方法参数是 实体类对象 方式调用的方法</span>
     <span class="token comment">//封装对象</span>
    <span class="token comment">/* Brand brand = new Brand();
        brand.setStatus(status);
        brand.setCompanyName(companyName);
        brand.setBrandName(brandName);*/</span>
    
    <span class="token comment">//List&lt;Brand&gt; brands = brandMapper.selectByCondition(brand);</span>
    
    <span class="token comment">//方式三 ：接口方法参数是 map集合对象 方式调用的方法</span>
    <span class="token class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;status&quot;</span> <span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;companyName&quot;</span><span class="token punctuation">,</span> companyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;brandName&quot;</span> <span class="token punctuation">,</span> brandName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> brands <span class="token operator">=</span> brandMapper<span class="token punctuation">.</span><span class="token function">selectByCondition</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>brands<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//5. 释放资源</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h4 id="_1-4-4-动态sql"><a href="#_1-4-4-动态sql" class="header-anchor">#</a> 1.4.4  动态SQL</h4> <p>上述功能实现存在很大的问题。用户在输入条件时，肯定不会所有的条件都填写，这个时候我们的SQL语句就不能那样写的</p> <p>例如用户只输入 当前状态 时，SQL语句就是</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_brand <span class="token keyword">where</span> <span class="token keyword">status</span> <span class="token operator">=</span> <span class="token comment">#{status}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>而用户如果只输入企业名称时，SQL语句就是</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_brand <span class="token keyword">where</span> company_name <span class="token operator">like</span> <span class="token comment">#{companName}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>而用户如果输入了 <code>当前状态</code> 和 <code>企业名称</code> 时，SQL语句又不一样</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_brand <span class="token keyword">where</span> <span class="token keyword">status</span> <span class="token operator">=</span> <span class="token comment">#{status} and company_name like #{companName}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>针对上述的需要，Mybatis对动态SQL有很强大的支撑：</p> <blockquote><ul><li><p>if</p></li> <li><p>choose (when, otherwise)</p></li> <li><p>trim (where, set)</p></li> <li><p>foreach</p></li></ul></blockquote> <p>我们先学习 if 标签和 where 标签：</p> <ul><li><p>if 标签：条件判断</p> <ul><li>test 属性：逻辑表达式</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectByCondition<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand
    where
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>status != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and status = #{status}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>companyName != null and companyName != '' <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and company_name like #{companyName}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandName != null and brandName != '' <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and brand_name like #{brandName}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>如上的这种SQL语句就会根据传递的参数值进行动态的拼接。如果此时status和companyName有值那么就会值拼接这两个条件。</p> <p>执行结果如下：</p> <p><img alt="image-20210729212510291" data-src="/assets/image-20210729212510291.png" loading="lazy" class="lazy"></p> <p>但是它也存在问题，如果此时给的参数值是</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// map.put(&quot;status&quot; , status);</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;companyName&quot;</span><span class="token punctuation">,</span> companyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;brandName&quot;</span> <span class="token punctuation">,</span> brandName<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>拼接的SQL语句就变成了</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_brand <span class="token keyword">where</span> <span class="token operator">and</span> company_name <span class="token operator">like</span> ? <span class="token operator">and</span> brand_name <span class="token operator">like</span> ?
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>而上面的语句中 where 关键后直接跟 and 关键字，这就是一条错误的SQL语句。这个就可以使用 where 标签解决</p></li> <li><p>where 标签</p> <ul><li>作用：
<ul><li>替换where关键字</li> <li>会动态的去掉第一个条件前的 and</li> <li>如果所有的参数没有值则不加where关键字</li></ul></li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectByCondition<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>status != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and status = #{status}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>companyName != null and companyName != '' <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and company_name like #{companyName}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandName != null and brandName != '' <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and brand_name like #{brandName}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><blockquote><p>注意：需要给每个条件前都加上 and 关键字。</p></blockquote></li></ul> <h3 id="_1-5-单个条件-动态sql"><a href="#_1-5-单个条件-动态sql" class="header-anchor">#</a> 1.5 单个条件（动态SQL）</h3> <img src="/assets/image-20210729213613029.png" alt="image-20210729213613029" style="zoom:80%;"> <p>如上图所示，在查询时只能选择 <code>品牌名称</code>、<code>当前状态</code>、<code>企业名称</code> 这三个条件中的一个，但是用户到底选择哪儿一个，我们并不能确定。这种就属于单个条件的动态SQL语句。</p> <p>这种需求需要使用到  <code>choose（when，otherwise）标签</code>  实现，  而 <code>choose</code> 标签类似于Java 中的switch语句。</p> <p>通过一个案例来使用这些标签</p> <h4 id="_1-5-1-编写接口方法"><a href="#_1-5-1-编写接口方法" class="header-anchor">#</a> 1.5.1  编写接口方法</h4> <p>在 <code>BrandMapper</code> 接口中定义单条件查询的方法。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
  * 单条件动态查询
  * @param brand
  * @return
  */</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectByConditionSingle</span><span class="token punctuation">(</span><span class="token class-name">Brand</span> brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="_1-5-2-编写sql语句"><a href="#_1-5-2-编写sql语句" class="header-anchor">#</a> 1.5.2  编写SQL语句</h4> <p>在 <code>BrandMapper.xml</code> 映射配置文件中编写 <code>statement</code>，使用 <code>resultMap</code> 而不是使用 <code>resultType</code></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectByConditionSingle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select *
    from tb_brand
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>choose</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--相当于switch--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>status != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--相当于case--&gt;</span>
                status = #{status}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>companyName != null and companyName != '' <span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--相当于case--&gt;</span>
                company_name like #{companyName}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandName != null and brandName != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--相当于case--&gt;</span>
                brand_name like #{brandName}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>choose</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="_1-5-3-编写测试方法"><a href="#_1-5-3-编写测试方法" class="header-anchor">#</a> 1.5.3  编写测试方法</h4> <p>在 <code>test/java</code> 下的 <code>com.itheima.mapper</code>  包下的 <code>MybatisTest类中</code> 定义测试方法</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelectByConditionSingle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//接收参数</span>
    <span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> companyName <span class="token operator">=</span> <span class="token string">&quot;华为&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> brandName <span class="token operator">=</span> <span class="token string">&quot;华为&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 处理参数</span>
    companyName <span class="token operator">=</span> <span class="token string">&quot;%&quot;</span> <span class="token operator">+</span> companyName <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span><span class="token punctuation">;</span>
    brandName <span class="token operator">=</span> <span class="token string">&quot;%&quot;</span> <span class="token operator">+</span> brandName <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">//封装对象</span>
    <span class="token class-name">Brand</span> brand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Brand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//brand.setStatus(status);</span>
    brand<span class="token punctuation">.</span><span class="token function">setCompanyName</span><span class="token punctuation">(</span>companyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//brand.setBrandName(brandName);</span>

    <span class="token comment">//1. 获取SqlSessionFactory</span>
    <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. 获取SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//3. 获取Mapper接口的代理对象</span>
    <span class="token class-name">BrandMapper</span> brandMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BrandMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//4. 执行方法</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> brands <span class="token operator">=</span> brandMapper<span class="token punctuation">.</span><span class="token function">selectByConditionSingle</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>brands<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//5. 释放资源</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>执行测试方法结果如下：</p> <img src="/assets/image-20210729214548756.png" alt="image-20210729214548756" style="zoom:70%;"> <h3 id="_1-6-添加数据"><a href="#_1-6-添加数据" class="header-anchor">#</a> 1.6  添加数据</h3> <img src="/assets/image-20210729214917317.png" alt="image-20210729214917317" style="zoom:70%;"> <p>如上图是我们平时在添加数据时展示的页面，而我们在该页面输入想要的数据后添加 <code>提交</code> 按钮，就会将这些数据添加到数据库中。接下来我们就来实现添加数据的操作。</p> <ul><li><p>编写接口方法</p> <img src="/assets/image-20210729215351651.png" alt="image-20210729215351651" style="zoom:80%;"> <p>参数：除了id之外的所有的数据。id对应的是表中主键值，而主键我们是 ==自动增长== 生成的。</p></li> <li><p>编写SQL语句</p> <img src="/assets/image-20210729215537167.png" alt="image-20210729215537167" style="zoom:80%;"></li> <li><p>编写测试方法并执行</p></li></ul> <p>明确了该功能实现的步骤后，接下来我们进行具体的操作。</p> <h4 id="_1-6-1-编写接口方法"><a href="#_1-6-1-编写接口方法" class="header-anchor">#</a> 1.6.1  编写接口方法</h4> <p>在 <code>BrandMapper</code> 接口中定义添加方法。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token comment">/**
   * 添加
   */</span>
<span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Brand</span> brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_1-6-2-编写sql语句"><a href="#_1-6-2-编写sql语句" class="header-anchor">#</a> 1.6.2  编写SQL语句</h4> <p>在 <code>BrandMapper.xml</code> 映射配置文件中编写添加数据的 <code>statement</code></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into tb_brand (brand_name, company_name, ordered, description, status)
    values (#{brandName}, #{companyName}, #{ordered}, #{description}, #{status});
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_1-6-3-编写测试方法"><a href="#_1-6-3-编写测试方法" class="header-anchor">#</a> 1.6.3  编写测试方法</h4> <p>在 <code>test/java</code> 下的 <code>com.itheima.mapper</code>  包下的 <code>MybatisTest类中</code> 定义测试方法</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//接收参数</span>
    <span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> companyName <span class="token operator">=</span> <span class="token string">&quot;波导手机&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> brandName <span class="token operator">=</span> <span class="token string">&quot;波导&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> description <span class="token operator">=</span> <span class="token string">&quot;手机中的战斗机&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> ordered <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

    <span class="token comment">//封装对象</span>
    <span class="token class-name">Brand</span> brand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Brand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    brand<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
    brand<span class="token punctuation">.</span><span class="token function">setCompanyName</span><span class="token punctuation">(</span>companyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    brand<span class="token punctuation">.</span><span class="token function">setBrandName</span><span class="token punctuation">(</span>brandName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    brand<span class="token punctuation">.</span><span class="token function">setDescription</span><span class="token punctuation">(</span>description<span class="token punctuation">)</span><span class="token punctuation">;</span>
    brand<span class="token punctuation">.</span><span class="token function">setOrdered</span><span class="token punctuation">(</span>ordered<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//1. 获取SqlSessionFactory</span>
    <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. 获取SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//SqlSession sqlSession = sqlSessionFactory.openSession(true); //设置自动提交事务，这种情况不需要手动提交事务了</span>
    <span class="token comment">//3. 获取Mapper接口的代理对象</span>
    <span class="token class-name">BrandMapper</span> brandMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BrandMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//4. 执行方法</span>
    brandMapper<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//提交事务</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//5. 释放资源</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>执行结果如下：</p> <p><img alt="image-20210729220348255" data-src="/assets/image-20210729220348255.png" loading="lazy" class="lazy"></p> <h4 id="_1-6-4-添加-主键返回"><a href="#_1-6-4-添加-主键返回" class="header-anchor">#</a> 1.6.4  添加-主键返回</h4> <p>在数据添加成功后，有时候需要获取插入数据库数据的主键（主键是自增长）。</p> <p>比如：添加订单和订单项，如下图就是京东上的订单</p> <img src="/assets/image-20210729221207962.png" alt="image-20210729221207962" style="zoom:80%;"> <p>订单数据存储在订单表中，订单项存储在订单项表中。</p> <ul><li><p>添加订单数据</p> <img src="/assets/image-20210729221049462.png" alt="image-20210729221049462" style="zoom:80%;"></li> <li><p>添加订单项数据，订单项中需要设置所属订单的id</p> <img src="/assets/image-20210729221058898.png" alt="image-20210729221058898" style="zoom:80%;"></li></ul> <p>明白了什么时候 <code>主键返回</code> 。接下来我们简单模拟一下，在添加完数据后打印id属性值，能打印出来说明已经获取到了。</p> <p>我们将上面添加品牌数据的案例中映射配置文件里 <code>statement</code> 进行修改，如下</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>add<span class="token punctuation">&quot;</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into tb_brand (brand_name, company_name, ordered, description, status)
    values (#{brandName}, #{companyName}, #{ordered}, #{description}, #{status});
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>在 insert 标签上添加如下属性：</p> <ul><li>useGeneratedKeys：是够获取自动增长的主键值。true表示获取</li> <li>keyProperty  ：指定将获取到的主键值封装到哪儿个属性里</li></ul></blockquote> <h3 id="_1-7-修改"><a href="#_1-7-修改" class="header-anchor">#</a> 1.7  修改</h3> <img src="/assets/image-20210729222642700.png" alt="image-20210729222642700" style="zoom:80%;"> <p>如图所示是修改页面，用户在该页面书写需要修改的数据，点击 <code>提交</code> 按钮，就会将数据库中对应的数据进行修改。注意一点，如果哪儿个输入框没有输入内容，我们是将表中数据对应字段值替换为空白还是保留字段之前的值？答案肯定是保留之前的数据。</p> <p>接下来我们就具体来实现</p> <h4 id="_1-7-1-编写接口方法"><a href="#_1-7-1-编写接口方法" class="header-anchor">#</a> 1.7.1  编写接口方法</h4> <p>在 <code>BrandMapper</code> 接口中定义修改方法。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token comment">/**
   * 修改
   */</span>
<span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Brand</span> brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>上述方法参数 Brand 就是封装了需要修改的数据，而id肯定是有数据的，这也是和添加方法的区别。</p></blockquote> <h4 id="_1-7-2-编写sql语句"><a href="#_1-7-2-编写sql语句" class="header-anchor">#</a> 1.7.2  编写SQL语句</h4> <p>在 <code>BrandMapper.xml</code> 映射配置文件中编写修改数据的 <code>statement</code>。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    update tb_brand
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brandName != null and brandName != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            brand_name = #{brandName},
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>companyName != null and companyName != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            company_name = #{companyName},
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ordered != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            ordered = #{ordered},
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description != null and description != ''<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            description = #{description},
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>status != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            status = #{status}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    where id = #{id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><blockquote><p><em>set</em> 标签可以用于动态包含需要更新的列，忽略其它不更新的列。</p></blockquote> <h4 id="_1-7-3-编写测试方法"><a href="#_1-7-3-编写测试方法" class="header-anchor">#</a> 1.7.3  编写测试方法</h4> <p>在 <code>test/java</code> 下的 <code>com.itheima.mapper</code>  包下的 <code>MybatisTest类中</code> 定义测试方法</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//接收参数</span>
    <span class="token keyword">int</span> status <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> companyName <span class="token operator">=</span> <span class="token string">&quot;波导手机&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> brandName <span class="token operator">=</span> <span class="token string">&quot;波导&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> description <span class="token operator">=</span> <span class="token string">&quot;波导手机,手机中的战斗机&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> ordered <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>

    <span class="token comment">//封装对象</span>
    <span class="token class-name">Brand</span> brand <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Brand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    brand<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//        brand.setCompanyName(companyName);</span>
    <span class="token comment">//        brand.setBrandName(brandName);</span>
    <span class="token comment">//        brand.setDescription(description);</span>
    <span class="token comment">//        brand.setOrdered(ordered);</span>
    brand<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//1. 获取SqlSessionFactory</span>
    <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. 获取SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//SqlSession sqlSession = sqlSessionFactory.openSession(true);</span>
    <span class="token comment">//3. 获取Mapper接口的代理对象</span>
    <span class="token class-name">BrandMapper</span> brandMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BrandMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//4. 执行方法</span>
    <span class="token keyword">int</span> count <span class="token operator">=</span> brandMapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//提交事务</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//5. 释放资源</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>执行测试方法结果如下：</p> <p><img alt="image-20210729224205522" data-src="/assets/image-20210729224205522.png" loading="lazy" class="lazy"></p> <p>从结果中SQL语句可以看出，只修改了 <code>status</code>  字段值，因为我们给的数据中只给Brand实体对象的 <code>status</code> 属性设置值了。这就是 <code>set</code> 标签的作用。</p> <h3 id="_1-8-删除一行数据"><a href="#_1-8-删除一行数据" class="header-anchor">#</a> 1.8  删除一行数据</h3> <p><img alt="image-20210729224549305" data-src="/assets/image-20210729224549305.png" loading="lazy" class="lazy"></p> <p>如上图所示，每行数据后面都有一个 <code>删除</code> 按钮，当用户点击了该按钮，就会将改行数据删除掉。那我们就需要思考，这种删除是根据什么进行删除呢？是通过主键id删除，因为id是表中数据的唯一标识。</p> <p>接下来就来实现该功能。</p> <h4 id="_1-8-1-编写接口方法"><a href="#_1-8-1-编写接口方法" class="header-anchor">#</a> 1.8.1  编写接口方法</h4> <p>在 <code>BrandMapper</code> 接口中定义根据id删除方法。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
  * 根据id删除
  */</span>
<span class="token keyword">void</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_1-8-2-编写sql语句"><a href="#_1-8-2-编写sql语句" class="header-anchor">#</a> 1.8.2  编写SQL语句</h4> <p>在 <code>BrandMapper.xml</code> 映射配置文件中编写删除一行数据的 <code>statement</code></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteById<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    delete from tb_brand where id = #{id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_1-8-3-编写测试方法"><a href="#_1-8-3-编写测试方法" class="header-anchor">#</a> 1.8.3  编写测试方法</h4> <p>在 <code>test/java</code> 下的 <code>com.itheima.mapper</code>  包下的 <code>MybatisTest类中</code> 定义测试方法</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//接收参数</span>
    <span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>

    <span class="token comment">//1. 获取SqlSessionFactory</span>
    <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. 获取SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//SqlSession sqlSession = sqlSessionFactory.openSession(true);</span>
    <span class="token comment">//3. 获取Mapper接口的代理对象</span>
    <span class="token class-name">BrandMapper</span> brandMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BrandMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//4. 执行方法</span>
    brandMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//提交事务</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//5. 释放资源</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>运行过程只要没报错，直接到数据库查询数据是否还存在。</p> <h3 id="_1-9-批量删除"><a href="#_1-9-批量删除" class="header-anchor">#</a> 1.9  批量删除</h3> <img src="/assets/image-20210729225713894.png" alt="image-20210729225713894" style="zoom:70%;"> <p>如上图所示，用户可以选择多条数据，然后点击上面的 <code>删除</code> 按钮，就会删除数据库中对应的多行数据。</p> <h4 id="_1-9-1-编写接口方法"><a href="#_1-9-1-编写接口方法" class="header-anchor">#</a> 1.9.1  编写接口方法</h4> <p>在 <code>BrandMapper</code> 接口中定义删除多行数据的方法。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
  * 批量删除
  */</span>
<span class="token keyword">void</span> <span class="token function">deleteByIds</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>参数是一个数组，数组中存储的是多条数据的id</p></blockquote> <h4 id="_1-9-2-编写sql语句"><a href="#_1-9-2-编写sql语句" class="header-anchor">#</a> 1.9.2  编写SQL语句</h4> <p>在 <code>BrandMapper.xml</code> 映射配置文件中编写删除多条数据的 <code>statement</code>。</p> <p>编写SQL时需要遍历数组来拼接SQL语句。Mybatis 提供了 <code>foreach</code> 标签供我们使用</p> <p><strong>foreach 标签</strong></p> <p>用来迭代任何可迭代的对象（如数组，集合）。</p> <ul><li>collection 属性：
<ul><li>mybatis会将数组参数，封装为一个Map集合。
<ul><li>默认：array = 数组</li> <li>使用@Param注解改变map集合的默认key的名称</li></ul></li></ul></li> <li>item 属性：本次迭代获取到的元素。</li> <li>separator 属性：集合项迭代之间的分隔符。<code>foreach</code> 标签不会错误地添加多余的分隔符。也就是最后一次迭代不会加分隔符。</li> <li>open 属性：该属性值是在拼接SQL语句之前拼接的语句，只会拼接一次</li> <li>close 属性：该属性值是在拼接SQL语句拼接后拼接的语句，只会拼接一次</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteByIds<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    delete from tb_brand where id
    in
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>array<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
    ;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>假如数组中的id数据是{1,2,3}，那么拼接后的sql语句就是：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> tb_brand <span class="token keyword">where</span> id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></blockquote> <h4 id="_1-9-3-编写测试方法"><a href="#_1-9-3-编写测试方法" class="header-anchor">#</a> 1.9.3  编写测试方法</h4> <p>在 <code>test/java</code> 下的 <code>com.itheima.mapper</code>  包下的 <code>MybatisTest类中</code> 定义测试方法</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteByIds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">//接收参数</span>
    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ids <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">//1. 获取SqlSessionFactory</span>
    <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2. 获取SqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//SqlSession sqlSession = sqlSessionFactory.openSession(true);</span>
    <span class="token comment">//3. 获取Mapper接口的代理对象</span>
    <span class="token class-name">BrandMapper</span> brandMapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BrandMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//4. 执行方法</span>
    brandMapper<span class="token punctuation">.</span><span class="token function">deleteByIds</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//提交事务</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//5. 释放资源</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_1-10-mybatis参数传递"><a href="#_1-10-mybatis参数传递" class="header-anchor">#</a> 1.10  Mybatis参数传递</h3> <p>Mybatis 接口方法中可以接收各种各样的参数，如下：</p> <ul><li>多个参数</li> <li>单个参数：单个参数又可以是如下类型
<ul><li>POJO 类型</li> <li>Map 集合类型</li> <li>Collection 集合类型</li> <li>List 集合类型</li> <li>Array 类型</li> <li>其他类型</li></ul></li></ul> <h4 id="_1-10-1-多个参数"><a href="#_1-10-1-多个参数" class="header-anchor">#</a> 1.10.1  多个参数</h4> <p>如下面的代码，就是接收两个参数，而接收多个参数需要使用 <code>@Param</code> 注解，那么为什么要加该注解呢？这个问题要弄明白就必须来研究Mybatis 底层对于这些参数是如何处理的。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">User</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select *
    from tb_user
    where 
    	username=#{username}
    	and password=#{password}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>我们在接口方法中定义多个参数，Mybatis 会将这些参数封装成 Map 集合对象，值就是参数值，而键在没有使用 <code>@Param</code> 注解时有以下命名规则：</p> <ul><li><p>以 arg 开头  ：第一个参数就叫 arg0，第二个参数就叫 arg1，以此类推。如：</p> <blockquote><p>map.put(&quot;arg0&quot;，参数值1);</p> <p>map.put(&quot;arg1&quot;，参数值2);</p></blockquote></li> <li><p>以 param 开头 ： 第一个参数就叫 param1，第二个参数就叫 param2，依次类推。如：</p> <blockquote><p>map.put(&quot;param1&quot;，参数值1);</p> <p>map.put(&quot;param2&quot;，参数值2);</p></blockquote></li></ul> <p><strong>代码验证：</strong></p> <ul><li><p>在 <code>UserMapper</code> 接口中定义如下方法</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">User</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span><span class="token class-name">String</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>在 <code>UserMapper.xml</code> 映射配置文件中定义SQL</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select *
    from tb_user
    where 
    	username=#{arg0}
    	and password=#{arg1}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>或者</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select *
    from tb_user
    where 
    	username=#{param1}
    	and password=#{param2}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>运行代码结果如下</p> <img src="/assets/image-20210805230303461.png" alt="image-20210805230303461" style="zoom:80%;"> <p>在映射配合文件的SQL语句中使用用 <code>arg</code> 开头的和 <code>param</code> 书写，代码的可读性会变的特别差，此时可以使用 <code>@Param</code> 注解。</p></li></ul> <p>在接口方法参数上使用 <code>@Param</code> 注解，Mybatis 会将 <code>arg</code> 开头的键名替换为对应注解的属性值。</p> <p><strong>代码验证：</strong></p> <ul><li><p>在 <code>UserMapper</code> 接口中定义如下方法，在 <code>username</code> 参数前加上 <code>@Param</code> 注解</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">User</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Mybatis 在封装 Map 集合时，键名就会变成如下：</p> <blockquote><p>map.put(&quot;username&quot;，参数值1);</p> <p>map.put(&quot;arg1&quot;，参数值2);</p> <p>map.put(&quot;param1&quot;，参数值1);</p> <p>map.put(&quot;param2&quot;，参数值2);</p></blockquote></li> <li><p>在 <code>UserMapper.xml</code> 映射配置文件中定义SQL</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select *
    from tb_user
    where 
    	username=#{username}
    	and password=#{param2}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>运行程序结果没有报错。而如果将 <code>#{}</code> 中的 <code>username</code> 还是写成  <code>arg0</code></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>select<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	select *
    from tb_user
    where 
    	username=#{arg0}
    	and password=#{param2}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>运行程序则可以看到错误</p> <p><img alt="image-20210805231727206" data-src="/assets/image-20210805231727206.png" loading="lazy" class="lazy"></p></li></ul> <p>==结论：以后接口参数是多个时，在每个参数上都使用 <code>@Param</code> 注解。这样代码的可读性更高。==</p> <h4 id="_1-10-2-单个参数"><a href="#_1-10-2-单个参数" class="header-anchor">#</a> 1.10.2  单个参数</h4> <ul><li><p>POJO 类型</p> <p>直接使用。要求 <code>属性名</code> 和 <code>参数占位符名称</code> 一致</p></li> <li><p>Map 集合类型</p> <p>直接使用。要求 <code>map集合的键名</code> 和 <code>参数占位符名称</code> 一致</p></li> <li><p>Collection 集合类型</p> <p>Mybatis 会将集合封装到 map 集合中，如下：</p> <blockquote><p>map.put(&quot;arg0&quot;，collection集合);</p> <p>map.put(&quot;collection&quot;，collection集合;</p></blockquote> <p>==可以使用 <code>@Param</code> 注解替换map集合中默认的 arg 键名。==</p></li> <li><p>List 集合类型</p> <p>Mybatis 会将集合封装到 map 集合中，如下：</p> <blockquote><p>map.put(&quot;arg0&quot;，list集合);</p> <p>map.put(&quot;collection&quot;，list集合);</p> <p>map.put(&quot;list&quot;，list集合);</p></blockquote> <p>==可以使用 <code>@Param</code> 注解替换map集合中默认的 arg 键名。==</p></li> <li><p>Array 类型</p> <p>Mybatis 会将集合封装到 map 集合中，如下：</p> <blockquote><p>map.put(&quot;arg0&quot;，数组);</p> <p>map.put(&quot;array&quot;，数组);</p></blockquote> <p>==可以使用 <code>@Param</code> 注解替换map集合中默认的 arg 键名。==</p></li> <li><p>其他类型</p> <p>比如int类型，<code>参数占位符名称</code> 叫什么都可以。尽量做到见名知意</p></li></ul> <h2 id="_2-注解实现crud"><a href="#_2-注解实现crud" class="header-anchor">#</a> 2，注解实现CRUD</h2> <p>使用注解开发会比配置文件开发更加方便。如下就是使用注解进行开发</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;select * from tb_user where id = #{id}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>==注意：==</p> <ul><li>注解是用来替换映射配置文件方式配置的，所以使用了注解，就不需要再映射配置文件中书写对应的 <code>statement</code></li></ul></blockquote> <p>Mybatis 针对 CURD 操作都提供了对应的注解，已经做到见名知意。如下：</p> <ul><li>查询 ：@Select</li> <li>添加 ：@Insert</li> <li>修改 ：@Update</li> <li>删除 ：@Delete</li></ul> <p>接下来我们做一个案例来使用 Mybatis 的注解开发</p> <p><strong>代码实现：</strong></p> <ul><li><p>将之前案例中 <code>UserMapper.xml</code> 中的 根据id查询数据 的 <code>statement</code> 注释掉</p> <img src="/assets/image-20210805235229938.png" alt="image-20210805235229938" style="zoom:70%;"></li> <li><p>在 <code>UserMapper</code> 接口的 <code>selectById</code> 方法上添加注解</p> <img src="/assets/image-20210805235405070.png" alt="image-20210805235405070" style="zoom:70%;"></li> <li><p>运行测试程序也能正常查询到数据</p></li></ul> <p>我们课程上只演示这一个查询的注解开发，其他的同学们下来可以自己实现，都是比较简单。</p> <p>==注意：==在官方文档中 <code>入门</code> 中有这样的一段话：</p> <p><img alt="image-20210805234302849" data-src="/assets/image-20210805234302849.png" loading="lazy" class="lazy"></p> <p>所以，==注解完成简单功能，配置文件完成复杂功能。==</p> <p>而我们之前写的动态 SQL 就是复杂的功能，如果用注解使用的话，就需要使用到 Mybatis 提供的SQL构建器来完成，而对应的代码如下：</p> <img src="/assets/image-20210805234842497.png" alt="image-20210805234842497" style="zoom:70%;"> <p>上述代码将java代码和SQL语句融到了一块，使得代码的可读性大幅度降低。</p></div> <footer class="page-edit" style="margin:0;"><div class="edit-link"><a href="https://github.com/liyupi/codefather/edit/master/学习笔记/JavaWeb/Mybatis.md" target="_blank" rel="noopener noreferrer">完善页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/my_blog/_04-%E8%BF%90%E7%AE%97%E7%AC%A6/" class="prev">
        四、运算符
      </a></span> <span class="next"><a href="/my_blog/javascript/">
        JavaScript
      </a>
      →
    </span></p></div></div> <div class="toc-container-sidebar"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:86vh"><div style="font-weight:bold;">Mybatis练习</div> <hr> <div class="toc-box"><ul class="toc-sidebar-links"><li><a href="/my_blog/mybatis/#_1-配置文件实现crud" class="toc-sidebar-link">1，配置文件实现CRUD</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/my_blog/mybatis/#_1-1-环境准备" class="toc-sidebar-link">1.1  环境准备</a></li><li class="toc-sidebar-sub-header"><a href="/my_blog/mybatis/#_1-2-查询所有数据" class="toc-sidebar-link">1.2  查询所有数据</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-2-1-编写接口方法" class="toc-sidebar-link">1.2.1  编写接口方法</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-2-2-编写sql语句" class="toc-sidebar-link">1.2.2  编写SQL语句</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-2-3-编写测试方法" class="toc-sidebar-link">1.2.3  编写测试方法</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-2-4-起别名解决上述问题" class="toc-sidebar-link">1.2.4  起别名解决上述问题</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-2-5-使用resultmap解决上述问题" class="toc-sidebar-link">1.2.5  使用resultMap解决上述问题</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-2-6-小结" class="toc-sidebar-link">1.2.6  小结</a></li><li class="toc-sidebar-sub-header"><a href="/my_blog/mybatis/#_1-3-查询详情" class="toc-sidebar-link">1.3  查询详情</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-3-1-编写接口方法" class="toc-sidebar-link">1.3.1  编写接口方法</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-3-2-编写sql语句" class="toc-sidebar-link">1.3.2  编写SQL语句</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-3-3-编写测试方法" class="toc-sidebar-link">1.3.3  编写测试方法</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-3-4-参数占位符" class="toc-sidebar-link">1.3.4  参数占位符</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-3-5-parametertype使用" class="toc-sidebar-link">1.3.5  parameterType使用</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-3-6-sql语句中特殊字段处理" class="toc-sidebar-link">1.3.6  SQL语句中特殊字段处理</a></li><li class="toc-sidebar-sub-header"><a href="/my_blog/mybatis/#_1-4-多条件查询" class="toc-sidebar-link">1.4  多条件查询</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-4-1-编写接口方法" class="toc-sidebar-link">1.4.1  编写接口方法</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-4-2-编写sql语句" class="toc-sidebar-link">1.4.2  编写SQL语句</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-4-3-编写测试方法" class="toc-sidebar-link">1.4.3  编写测试方法</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-4-4-动态sql" class="toc-sidebar-link">1.4.4  动态SQL</a></li><li class="toc-sidebar-sub-header"><a href="/my_blog/mybatis/#_1-5-单个条件-动态sql" class="toc-sidebar-link">1.5 单个条件（动态SQL）</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-5-1-编写接口方法" class="toc-sidebar-link">1.5.1  编写接口方法</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-5-2-编写sql语句" class="toc-sidebar-link">1.5.2  编写SQL语句</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-5-3-编写测试方法" class="toc-sidebar-link">1.5.3  编写测试方法</a></li><li class="toc-sidebar-sub-header"><a href="/my_blog/mybatis/#_1-6-添加数据" class="toc-sidebar-link">1.6  添加数据</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-6-1-编写接口方法" class="toc-sidebar-link">1.6.1  编写接口方法</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-6-2-编写sql语句" class="toc-sidebar-link">1.6.2  编写SQL语句</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-6-3-编写测试方法" class="toc-sidebar-link">1.6.3  编写测试方法</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-6-4-添加-主键返回" class="toc-sidebar-link">1.6.4  添加-主键返回</a></li><li class="toc-sidebar-sub-header"><a href="/my_blog/mybatis/#_1-7-修改" class="toc-sidebar-link">1.7  修改</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-7-1-编写接口方法" class="toc-sidebar-link">1.7.1  编写接口方法</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-7-2-编写sql语句" class="toc-sidebar-link">1.7.2  编写SQL语句</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-7-3-编写测试方法" class="toc-sidebar-link">1.7.3  编写测试方法</a></li><li class="toc-sidebar-sub-header"><a href="/my_blog/mybatis/#_1-8-删除一行数据" class="toc-sidebar-link">1.8  删除一行数据</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-8-1-编写接口方法" class="toc-sidebar-link">1.8.1  编写接口方法</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-8-2-编写sql语句" class="toc-sidebar-link">1.8.2  编写SQL语句</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-8-3-编写测试方法" class="toc-sidebar-link">1.8.3  编写测试方法</a></li><li class="toc-sidebar-sub-header"><a href="/my_blog/mybatis/#_1-9-批量删除" class="toc-sidebar-link">1.9  批量删除</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-9-1-编写接口方法" class="toc-sidebar-link">1.9.1  编写接口方法</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-9-2-编写sql语句" class="toc-sidebar-link">1.9.2  编写SQL语句</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-9-3-编写测试方法" class="toc-sidebar-link">1.9.3  编写测试方法</a></li><li class="toc-sidebar-sub-header"><a href="/my_blog/mybatis/#_1-10-mybatis参数传递" class="toc-sidebar-link">1.10  Mybatis参数传递</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-10-1-多个参数" class="toc-sidebar-link">1.10.1  多个参数</a></li><li class="toc-sidebar-sub-header toc-sidebar-depth-4"><a href="/my_blog/mybatis/#_1-10-2-单个参数" class="toc-sidebar-link">1.10.2  单个参数</a></li></ul></li><li><a href="/my_blog/mybatis/#_2-注解实现crud" class="toc-sidebar-link">2，注解实现CRUD</a><ul class="toc-sidebar-sub-headers"></ul></li></ul></div></div></div></div></div>  <main class="footer"> <div class="copy-right"><span class="name"> whh   |     </span> <a target="_blank" rel="noreferrer">
          
        </a></div></main></main> <aside class="page-sidebar"> <div class="page-side-toolbar"></div>  </aside></div><div class="global-ui"><!----></div></div>
    <script src="/my_blog/assets/js/app.635dd26a.js" defer></script><script src="/my_blog/assets/js/2.8c322ccd.js" defer></script><script src="/my_blog/assets/js/44.ae188fd5.js" defer></script>
  </body>
</html>
